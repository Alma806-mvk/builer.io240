/* Accessibility and Final Refinements - Light Mode */

[data-theme="light"] {
  /* ============================================
     ACCESSIBILITY IMPROVEMENTS
  ============================================ */

  /* High contrast focus indicators */
  *:focus-visible {
    outline: 3px solid #0ea5e9 !important;
    outline-offset: 2px !important;
    border-radius: 4px !important;
    box-shadow: 0 0 0 5px rgba(14, 165, 233, 0.2) !important;
  }

  /* Skip to content link */
  .skip-to-content {
    position: absolute !important;
    top: -40px !important;
    left: 6px !important;
    background: #0f172a !important;
    color: #ffffff !important;
    padding: 8px 16px !important;
    border-radius: 4px !important;
    text-decoration: none !important;
    z-index: 10000 !important;
    transition: top 0.3s ease !important;
  }

  .skip-to-content:focus {
    top: 6px !important;
  }

  /* Screen reader only content */
  .sr-only {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    padding: 0 !important;
    margin: -1px !important;
    overflow: hidden !important;
    clip: rect(0, 0, 0, 0) !important;
    white-space: nowrap !important;
    border: 0 !important;
  }

  /* ============================================
     HIGH CONTRAST ADJUSTMENTS
  ============================================ */

  /* Ensure text has sufficient contrast */
  .text-low-contrast {
    color: #475569 !important;
  }

  .text-medium-contrast {
    color: #334155 !important;
  }

  .text-high-contrast {
    color: #0f172a !important;
    font-weight: 600 !important;
  }

  /* Enhanced button contrast */
  button {
    min-height: 44px !important; /* Touch target size */
    min-width: 44px !important;
  }

  /* Enhanced link contrast */
  a {
    color: #0284c7 !important;
    text-decoration: underline !important;
    text-underline-offset: 2px !important;
  }

  a:hover {
    color: #0ea5e9 !important;
    text-decoration-thickness: 2px !important;
  }

  a:focus {
    outline: 2px solid #0ea5e9 !important;
    outline-offset: 2px !important;
    border-radius: 2px !important;
  }

  /* ============================================
     MOTION & ANIMATION PREFERENCES
  ============================================ */

  /* Respect reduced motion preferences */
  @media (prefers-reduced-motion: reduce) {
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }

    .loading-spinner,
    .loading-spinner-enhanced {
      animation: none !important;
      border: 4px solid #0ea5e9 !important;
    }

    .skeleton {
      animation: none !important;
      background: #f1f5f9 !important;
    }
  }

  /* ============================================
     PRINT STYLES
  ============================================ */

  @media print {
    /* Optimize for printing */
    * {
      background: white !important;
      color: black !important;
      box-shadow: none !important;
      text-shadow: none !important;
    }

    .modal-backdrop,
    .loading-overlay,
    .toast-container,
    .tooltip-enhanced,
    .popover-enhanced {
      display: none !important;
    }

    /* Print-friendly navigation */
    nav button {
      border: 1px solid #000 !important;
      background: white !important;
      color: black !important;
    }

    /* Print-friendly links */
    a {
      color: black !important;
      text-decoration: underline !important;
    }

    a[href^="http"]:after {
      content: " (" attr(href) ")" !important;
      font-size: 0.8em !important;
    }
  }

  /* ============================================
     MOBILE ENHANCEMENTS
  ============================================ */

  @media (max-width: 768px) {
    /* Larger touch targets on mobile */
    button,
    .clickable {
      min-height: 48px !important;
      min-width: 48px !important;
      padding: 12px 16px !important;
    }

    /* Better mobile typography */
    body {
      font-size: 16px !important; /* Prevents zoom on iOS */
      line-height: 1.6 !important;
    }

    /* Mobile-friendly forms */
    input,
    textarea,
    select {
      font-size: 16px !important;
      padding: 14px 16px !important;
      border-radius: 8px !important;
    }

    /* Mobile navigation improvements */
    nav button {
      padding: 16px 20px !important;
      font-size: 16px !important;
      border-radius: 12px !important;
    }

    /* Mobile modal improvements */
    .modal-container {
      margin: 8px !important;
      border-radius: 12px !important;
      max-width: calc(100vw - 16px) !important;
    }
  }

  /* ============================================
     DARK MODE SWITCH PREPARATION
  ============================================ */

  /* Theme transition smoothness */
  .theme-transition-element {
    transition: 
      background-color 0.3s cubic-bezier(0.4, 0, 0.2, 1),
      border-color 0.3s cubic-bezier(0.4, 0, 0.2, 1),
      color 0.3s cubic-bezier(0.4, 0, 0.2, 1),
      box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
  }

  /* ============================================
     PERFORMANCE OPTIMIZATIONS
  ============================================ */

  /* GPU acceleration for smooth animations */
  .gpu-accelerated {
    transform: translateZ(0) !important;
    will-change: transform !important;
  }

  /* Optimize for performance */
  .performance-optimized {
    contain: layout style paint !important;
  }

  /* ============================================
     BROWSER SPECIFIC FIXES
  ============================================ */

  /* Safari specific fixes */
  @supports (-webkit-appearance: none) {
    input[type="search"] {
      -webkit-appearance: none !important;
    }

    .backdrop-blur {
      -webkit-backdrop-filter: blur(20px) !important;
    }
  }

  /* Firefox specific fixes */
  @-moz-document url-prefix() {
    .firefox-fix {
      scrollbar-width: thin !important;
      scrollbar-color: #cbd5e1 #f1f5f9 !important;
    }
  }

  /* ============================================
     UTILITY CLASSES
  ============================================ */

  /* Light mode specific utilities */
  .light-bg-primary { background: #ffffff !important; }
  .light-bg-secondary { background: #f8fafc !important; }
  .light-bg-tertiary { background: #f1f5f9 !important; }
  
  .light-text-primary { color: #0f172a !important; }
  .light-text-secondary { color: #334155 !important; }
  .light-text-tertiary { color: #64748b !important; }
  
  .light-border-primary { border-color: #e2e8f0 !important; }
  .light-border-secondary { border-color: #cbd5e1 !important; }

  /* Elevation levels */
  .elevation-1 {
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05) !important;
  }

  .elevation-2 {
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.06), 0 2px 4px -1px rgba(0, 0, 0, 0.03) !important;
  }

  .elevation-3 {
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.06), 0 4px 6px -2px rgba(0, 0, 0, 0.03) !important;
  }

  .elevation-4 {
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04) !important;
  }

  .elevation-5 {
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15) !important;
  }

  /* ============================================
     COMPONENT STATE CLASSES
  ============================================ */

  /* Hover states */
  .hover-lift:hover {
    transform: translateY(-2px) !important;
    box-shadow: 0 8px 25px rgba(14, 165, 233, 0.15) !important;
  }

  .hover-scale:hover {
    transform: scale(1.02) !important;
  }

  .hover-glow:hover {
    box-shadow: 0 0 20px rgba(14, 165, 233, 0.3) !important;
  }

  /* Active states */
  .active-pressed:active {
    transform: scale(0.98) !important;
  }

  .active-glow {
    box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.2) !important;
  }

  /* Loading states */
  .loading-shimmer {
    background: linear-gradient(90deg, #f1f5f9 25%, #e2e8f0 50%, #f1f5f9 75%) !important;
    background-size: 200% 100% !important;
    animation: shimmer 2s infinite !important;
  }

  /* ============================================
     FINAL POLISH
  ============================================ */

  /* Smooth scrolling */
  html {
    scroll-behavior: smooth !important;
  }

  /* Better text rendering */
  body {
    -webkit-font-smoothing: antialiased !important;
    -moz-osx-font-smoothing: grayscale !important;
    text-rendering: optimizeLegibility !important;
  }

  /* Better image rendering */
  img {
    image-rendering: -webkit-optimize-contrast !important;
    image-rendering: crisp-edges !important;
  }

  /* Selection styles - Only apply when NOT in magic tools mode */
  :not(.magic-select-mode):not(.standard-text-selectable) ::selection {
    background: rgba(14, 165, 233, 0.2) !important;
    color: #0f172a !important;
  }

  :not(.magic-select-mode):not(.standard-text-selectable) ::-moz-selection {
    background: rgba(14, 165, 233, 0.2) !important;
    color: #0f172a !important;
  }
}
